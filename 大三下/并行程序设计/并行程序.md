冯诺伊曼体系 cpu 计算单元和控制单元 —>io—>主存



并行体系结构组织

1.共享内存多处理器结构（多核心，一个地址空间）

多个自治的处理器，连接到一个内存系统。

支持一个全局地址空间，每个处理器都能访问任何一个内存地址。

2.分布式内存结构

多个自治系统，由一个互联网络连接。

每个系统由自己独立的地址空间，处理器之间必须显式通信才能共享数据。

最常见的是有商用网络连接的pc集群。



共享内存架构编程。

一个共享内存程序就是一组线程。

1.线程通常在程序启动时创建，也可能动态创建。

2.每个线程有私有变量，如栈中的局部变量。

3.所有线程共享一组共享变量，如静态变量，共享的公共块或全局堆。

4.线程间通过读写共享变量隐式通信。

5.线程间通过锁和障碍（用共享变量实现）进行协同。

对应java：jvm栈保存局部基本变量，方法区保存静态变量，堆保存共享对象，通过synchronized/ReetrantLock/Volatile/AtomicInteger关键字实现读写共享变量，线程间通过wait()/notify()/notifyall()实现通信。



分布式内存架构编程。

一个分布式内存程序由若干具名程序组成。

1.一个进程就是一个线程加上局部地址空间—无共享数据

2.逻辑上共享的数据划分到不同进程局部存储。

3.进程间用send，receive对显式通信

4.每个通信时间都隐含了协同



互连网络（p24）

共享内存系统中：总线和交叉网络矩阵

分布式内存互连网络：全互连网络（成本高，效率高）、星形网络（成本低，故障率高）

衡量“同时通信的链路数目”或者“连接性”的一个标准：等分宽度，将节点分成两部分，值为连接的最坏情况。



并行架构小结（两大类）

1.完全连接：CMP...

2.稀有连接：集群...



并行程序设计的复杂性

足够的并发度（Amdahl定律）

并发粒度（独立的计算任务的大小）

局部性

负载均衡



能耗挑战、伸缩性挑战



作业一：并行硬件/软件调研

可选内容：

1. 调研超级计算机发展历史、剖析某个超级计算机的体系结构 
2. 调研你身边的笔记本/台式机/手机的并行架构（多核CPU、单核内的并行、GPU）
3. 调研并行软件发展的历史，戈登贝尔奖的历史，某个获奖成果所使用的并行技术。

要求

1. 撰写调研报告
2. 符合科技论文写作规范（如：软件学报）



并行算法设计：

1. 任务分解、数据依赖、竞争条件
2. 数据并行
3. 其他任务划分方法

并行算法分析

1. 并行算法与串行算法比较
2. 扩展性伸缩性、提升性能、是否随线程增多增加效率



设计一个并行算法

1. 计算任务分解
2. 保持依赖关系  两个内存操作的序保持序列
3. 额外开销

并行划分 -> 互斥 -> 粗粒度 -> 消除锁 -> 增加障碍 -> 多核并行求全局和



数据分解：每个任务的计算工作的结果对最终结果都是有用的，都要全部做完。

搜索分解：一旦一个任务找到解，全部任务即可停止，工作量可能大于，也可能小于串行算法。



并行算法分析：

1. 串行算法评价：算法时间复杂度表示为输入规模的函数
2. 并行算法评价：除了输入规模之外，还应考虑处理器数目、处理器相对运算速度、通信速度
3. 评价标准： 1）运行时间  2）加速比：并行算法比串行算法快多少



并行算法额外开销：

1. 进程间通信：最大开销，大部分并行算法都需要
2. 进程空闲：
3. 额外计算：



性能评价标准：

1. 运行时间
2. 并行算法总额外开销
3. 加速比